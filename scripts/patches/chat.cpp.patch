--- chat.cpp.orig	2025-10-29 15:18:34
+++ chat.cpp	2025-10-29 15:20:44
@@ -6,9 +6,6 @@
 #include "log.h"
 #include "regex-partial.h"

-#include <minja/chat-template.hpp>
-#include <minja/minja.hpp>
-
 #include <algorithm>
 #include <cstdio>
 #include <cctype>
@@ -126,16 +123,6 @@
     return diffs;
 }

-typedef minja::chat_template common_chat_template;
-
-struct common_chat_templates {
-    bool add_bos;
-    bool add_eos;
-    bool has_explicit_template; // Model had builtin template or template overridde was specified.
-    std::unique_ptr<common_chat_template> template_default; // always set (defaults to chatml)
-    std::unique_ptr<common_chat_template> template_tool_use;
-};
-
 struct templates_params {
     json messages;
     json tools;
@@ -812,7 +799,7 @@
         tmpl_inputs.extra_context.merge_patch(*additional_context);
     }
     // TODO: add flag to control date/time, if only for testing purposes.
-    // tmpl_inputs.now = std::chrono::system_clock::now();
+    tmpl_inputs.now = inputs.now;

     minja::chat_template_options tmpl_opts;
     // To avoid double BOS / EOS tokens, we're manually removing begining / trailing tokens
